document.querySelector(".card-pet")&&(block=document.querySelector(".card-pet"),arrow=document.querySelector(".card-pet__all-files"),(getAllFiles=function(e,t){e.addEventListener("click",function(){t.classList.toggle("card-pet__show-all"),e.classList.toggle("card-pet__all-files--rotate")})})(arrow,block));var block,arrow,getAllFiles,map,points,createPopup,reviewTextArea,reviewSubmit,min,max,valid,sliderButtons,sliderSlides,buttonClick,slides,slide,escEvent=function(e){return"Escape"===e.key||"Esc"===e.key},escKeydown=function(e,t){escEvent(e)&&(e.preventDefault(),t())},pageEvt=function(e,t,o,n){var i=e.target,o=i==o||o.contains(i),i=t.classList.contains("modal--active");!o&&i&&(e.preventDefault(),n(),document.removeEventListener("keydown",onPopupEscKeydown))},giveBtnClose=function(e){return e.querySelector(".modal__close")},buttonMenu=(document.querySelector(".map")&&(map=L.map("map").setView({lat:48.76448725577362,lng:44.478829},11),L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(map),createPopup=function(e){var t=e.title,o=e.description,n=e.workTime,e=e.tel;return'\n  <section class="map-baloon">\n  <h3 class="map-baloon__title">'+t+'</h3>\n  <p class="map-baloon__adress">'+o+'</p>\n  <a class="map-baloon__tel" href="tel:+'+e+'">'+e+'</a>\n  <p class="map-baloon__work-time">'+n+"</p>\n  </section>\n"},(points=[{title:"Айболит на Краснополянской",description:"Дзержинский район,\n    ул. Краснополянская, 30",tel:"962292",workTime:"Круглосуточно",lat:48.764467,lng:44.47886},{title:"Айболит на Тулака",description:"Советский район,\n    ул. Карла Маркса, 7",tel:"962292",workTime:"Круглосуточно",lat:48.676486,lng:44.478725}]).forEach(function(e){var t=e.lat,o=e.lng;L.marker({lat:t,lng:o}).addTo(map).bindPopup(createPopup(e),{keepInView:!0})})),document.querySelector(".menu__button")),menu=document.querySelector(".menu__list"),menuWrapper=document.querySelector(".menu__wrapper"),body=document.querySelector(".page-body"),pageEvtMenu=function(e){var t=e.target,o=t==menu||menu.contains(t),t=t==buttonMenu,n=menu.classList.contains("menu__list--active");o||t||!n||(e.preventDefault(),closeMenu(),document.removeEventListener("keydown",onPopupEscKeydown))},isButtonActive=function(){return buttonMenu.classList.contains("menu__button--active")},toggleMenu=function(){buttonMenu.classList.toggle("menu__button--active"),menu.classList.toggle("menu__list--active"),menuWrapper.classList.toggle("menu__wrapper--active"),body.classList.toggle("blur")},onPopupEscKeydown=function(e){return escKeydown(e,closeMenu)},openMenu=function(){toggleMenu(),document.addEventListener("keydown",onPopupEscKeydown),document.addEventListener("click",pageEvtMenu)},closeMenu=function(){toggleMenu(),document.removeEventListener("keydown",onPopupEscKeydown),document.removeEventListener("click",pageEvtMenu)},modals=(buttonMenu.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),(isButtonActive()?closeMenu:openMenu)()}),document.querySelectorAll(".modal")),changeCity=document.querySelector(".change-city"),reviewBtn=document.querySelector(".expert__give-review-button"),modalCity=document.querySelector(".modal__city"),reviewModal=document.querySelector(".modal__review"),reviewSuccess=document.querySelector(".modal__review-successful"),showModal=function(t){console.log(t);function e(e){return escKeydown(e,i)}function o(e){pageEvt(e,t,n,i)}var n=t.querySelector(".modal__wrapper"),i=function(){t.classList.remove("modal--active"),giveBtnClose(t).removeEventListener("click",i),document.removeEventListener("keydown",e),document.removeEventListener("click",o)};t.classList.add("modal--active"),document.addEventListener("keydown",e),document.addEventListener("click",o),giveBtnClose(t).addEventListener("click",i)};changeCity&&changeCity.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),showModal(modalCity)}),reviewBtn&&reviewBtn.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),showModal(reviewModal)}),reviewModal&&(reviewTextArea=reviewModal.querySelector(".modal__review-textarea"),reviewSubmit=reviewModal.querySelector(".modal__review-button"),min=30,max=1e3,valid=function(e){return min<e&&e<=max},reviewTextArea.addEventListener("input",function(){var e=reviewTextArea.value.length;valid(e)?(reviewSubmit.removeAttribute("disabled"),reviewTextArea.setCustomValidity("")):(reviewTextArea.setCustomValidity("Минимальное колчиство симоволов: "+min+". Максимальное колчиство симоволов "+max+". Вы ввели "+e),reviewSubmit.setAttribute("disabled","disabled")),reviewTextArea.reportValidity()}),reviewSubmit.addEventListener("click",function(e){e.stopPropagation(),e.preventDefault(),reviewTextArea.value="",showModal(reviewSuccess)})),document.querySelector(".about-company-slider")&&$(document).ready(function(){$(".about-company-slider").slick({slidesToShow:6,slidesToScroll:6,variableWidth:!0,responsive:[{breakpoint:1600,settings:{slidesToShow:4,slidesToScroll:4}},{breakpoint:768,settings:{slidesToShow:3,slidesToScroll:3}},{breakpoint:479,settings:{slidesToShow:1,slidesToScroll:1}}]})}),document.querySelector(".slick__appointments")&&$(document).ready(function(){$(".slick__appointments").slick({slidesToShow:3,slidesToScroll:3,variableWidth:!0,responsive:[{breakpoint:1919,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:767,settings:{arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1}},{breakpoint:479,settings:{arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1}}]})}),document.querySelector(".all-services__slider")&&$(document).ready(function(){$(".all-services__slider").slick({slidesToShow:4,slidesToScroll:4,variableWidth:!0,responsive:[{breakpoint:1919,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:767,settings:{arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1}},{breakpoint:479,settings:{arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1}}]})}),document.querySelector(".expert-profile__slider")&&$(document).ready(function(){$(".expert-profile__slider").slick({slidesToShow:3,slidesToScroll:1,variableWidth:!0,responsive:[{breakpoint:1919,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:767,settings:{arrows:!1,dots:!0,slidesToShow:1,slidesToScroll:1,variableWidth:!1,adaptiveHeight:!0}}]})}),document.querySelector(".slider__slide")&&(sliderButtons=document.querySelectorAll(".slider__button"),sliderSlides=document.querySelectorAll(".slider__slide"),buttonClick=function(e){document.querySelector(".slider__button--active").classList.remove("slider__button--active"),e.classList.add("slider__button--active")},slides=function(e,o){e.forEach(function(e,t){e.classList.contains("slider__slide--active")&&e.classList.remove("slider__slide--active"),t===o&&e.classList.add("slider__slide--active")})},(slide=function(){sliderButtons.forEach(function(e,t){e.addEventListener("click",function(){buttonClick(e),slides(sliderSlides,t)})})})());
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFycm93LWFsbC5qcyIsIm1hcC5qcyIsIm1vZGFsLmpzIiwic2xpZGVyLmpzIiwiaW5kZXguanMiLCJtZW51LmpzIiwic2xpY2stc2xpZGVyLmpzIl0sIm5hbWVzIjpbImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImJsb2NrIiwiYXJyb3ciLCJnZXRBbGxGaWxlcyIsImJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJtYXAiLCJwb2ludHMiLCJjcmVhdGVQb3B1cCIsInJldmlld1RleHRBcmVhIiwicmV2aWV3U3VibWl0IiwibWluIiwibWF4IiwidmFsaWQiLCJzbGlkZXJCdXR0b25zIiwic2xpZGVyU2xpZGVzIiwiYnV0dG9uQ2xpY2siLCJzbGlkZXMiLCJzbGlkZSIsImVzY0V2ZW50IiwiZSIsImtleSIsImVzY0tleWRvd24iLCJmbiIsInByZXZlbnREZWZhdWx0IiwicGFnZUV2dCIsIm1vZGFsIiwid3JhcHBlciIsImxldCIsInRhcmdldCIsIml0c0Jsb2NrIiwiY29udGFpbnMiLCJtb2RhbElzQWN0aXZlIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsIm9uUG9wdXBFc2NLZXlkb3duIiwiZ2l2ZUJ0bkNsb3NlIiwiZWwiLCJidXR0b25NZW51IiwiTCIsInNldFZpZXciLCJsYXQiLCJsbmciLCJ0aWxlTGF5ZXIiLCJhdHRyaWJ1dGlvbiIsImFkZFRvIiwicmVmIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsIndvcmtUaW1lIiwidGVsIiwiZm9yRWFjaCIsInBvaW50IiwibWFya2VyIiwiYmluZFBvcHVwIiwia2VlcEluVmlldyIsIm1lbnUiLCJtZW51V3JhcHBlciIsImJvZHkiLCJwYWdlRXZ0TWVudSIsIml0c01lbnUiLCJpdHNCdXR0b24iLCJtZW51SXNBY3RpdmUiLCJjbG9zZU1lbnUiLCJpc0J1dHRvbkFjdGl2ZSIsInRvZ2dsZU1lbnUiLCJvcGVuTWVudSIsIm1vZGFscyIsInN0b3BQcm9wYWdhdGlvbiIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJjaGFuZ2VDaXR5IiwicmV2aWV3QnRuIiwibW9kYWxDaXR5IiwicmV2aWV3TW9kYWwiLCJyZXZpZXdTdWNjZXNzIiwic2hvd01vZGFsIiwiY29uc29sZSIsImxvZyIsImNsb3NlTW9kYWwiLCJvbkNsaWNrUGFnZSIsImNvbnN0IiwicmVtb3ZlIiwiYWRkIiwidmFsdWUiLCJ2YWx1ZUxlbmd0aCIsImxlbmd0aCIsInJlbW92ZUF0dHJpYnV0ZSIsInNldEN1c3RvbVZhbGlkaXR5Iiwic2V0QXR0cmlidXRlIiwicmVwb3J0VmFsaWRpdHkiLCIkIiwicmVhZHkiLCJzbGljayIsInNsaWRlc1RvU2hvdyIsInNsaWRlc1RvU2Nyb2xsIiwidmFyaWFibGVXaWR0aCIsInJlc3BvbnNpdmUiLCJicmVha3BvaW50Iiwic2V0dGluZ3MiLCJhcnJvd3MiLCJkb3RzIiwiYWRhcHRpdmVIZWlnaHQiLCJjb2xsZWN0aW9uIiwiaSIsImoiXSwibWFwcGluZ3MiOiJBQUFBQSxTQUFBQyxjQUFBLFdBQUEsSUFDQUMsTUFBQUYsU0FBQUMsY0FBQSxXQUFBLEVBQ0FFLE1BQUFILFNBQUFDLGNBQUEsc0JBQUEsR0FHQUcsWUFBQSxTQUFBQyxFQUFBSCxHQUNBRyxFQUFBQyxpQkFBQSxRQUFBLFdBQ0FKLEVBQUFLLFVBQUFDLE9BQUEsb0JBQUEsRUFDQUgsRUFBQUUsVUFBQUMsT0FBQSw2QkFBQSxDLENBQ0EsQyxHQUdBTCxNQUFBRCxLQUFBLEdBWkEsSUFDQUEsTUFDQUMsTUFHQUMsWUNKQUssSUFhQUMsT0FxQkFDLFlDZUFDLGVBQ0FDLGFBRUFDLElBQ0FDLElBQ0FDLE1DdERBQyxjQUNBQyxhQUVBQyxZQU1BQyxPQVdBQyxNQ3JCQUMsU0FBQSxTQUFBQyxHQUNBLE1BQUEsV0FBQUEsRUFBQUMsS0FBQSxRQUFBRCxFQUFBQyxHLEVBR0FDLFdBQUEsU0FBQUYsRUFBQUcsR0FDQUosU0FBQUMsQ0FBQSxJQUNBQSxFQUFBSSxlQUFBLEVBQ0FELEVBQUEsRSxFQUlBRSxRQUFBLFNBQUFMLEVBQUFNLEVB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QkFBQSxpQkFBQSxFQUNBckQsYUFBQWxCLFNBQUF1RSxpQkFBQSxnQkFBQSxFQUVBcEQsWUFBQSxTQUFBb0IsR0FDQXZDLFNBQUFDLGNBQUEseUJBQUEsRUFDQU0sVUFBQTRFLE9BQUEsd0JBQUEsRUFDQTVDLEVBQUFoQyxVQUFBNkUsSUFBQSx3QkFBQSxDLEVBR0FoRSxPQUFBLFNBQUFvRixFQUFBQyxHQUNBRCxFQUFBbkQsUUFBQSxTQUFBZCxFQUFBbUUsR0FDQW5FLEVBQUFoQyxVQUFBMkIsU0FBQSx1QkFBQSxHQUNBSyxFQUFBaEMsVUFBQTRFLE9BQUEsdUJBQUEsRUFFQXVCLElBQUFELEdBQ0FsRSxFQUFBaEMsVUFBQTZFLElBQUEsdUJBQUEsQyxDQUVBLEMsR0FHQS9ELE1BQUEsV0FDQUosY0FBQW9DLFFBQUEsU0FBQWQsRUFBQWtFLEdBQ0FsRSxFQUFBakMsaUJBQUEsUUFBQSxXQUNBYSxZQUFBb0IsQ0FBQSxFQUNBbkIsT0FBQUYsYUFBQXVGLENBQUEsQyxDQUNBLEMsQ0FDQSxDLEdBR0EiLCJmaWxlIjoic2NyaXB0Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZC1wZXQnKSkge1xuICBjb25zdCBibG9jayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXBldCcpO1xuICBjb25zdCBhcnJvdyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXJkLXBldF9fYWxsLWZpbGVzJyk7XG5cblxuICBjb25zdCBnZXRBbGxGaWxlcyA9IChidXR0b24sIGJsb2NrKSA9PiB7XG4gICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgYmxvY2suY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZC1wZXRfX3Nob3ctYWxsJyk7XG4gICAgICBidXR0b24uY2xhc3NMaXN0LnRvZ2dsZSgnY2FyZC1wZXRfX2FsbC1maWxlcy0tcm90YXRlJyk7XG4gICAgfSlcbiAgfTtcblxuICBnZXRBbGxGaWxlcyhhcnJvdywgYmxvY2spO1xufVxuXG4iLCJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1hcCcpKSB7XG4gIGNvbnN0IG1hcCA9IEwubWFwKCdtYXAnKVxuICAgIC5zZXRWaWV3KHtcbiAgICAgIGxhdDogNDguNzY0NDg3MjU1NzczNjIsXG4gICAgICBsbmc6IDQ0LjQ3ODgyOSxcbiAgICB9LCAxMSk7XG5cbiAgTC50aWxlTGF5ZXIoXG4gICAgJ2h0dHBzOi8ve3N9LnRpbGUub3BlbnN0cmVldG1hcC5vcmcve3p9L3t4fS97eX0ucG5nJyxcbiAgICB7XG4gICAgICBhdHRyaWJ1dGlvbjogJyZjb3B5OyA8YSBocmVmPVwiaHR0cHM6Ly93d3cub3BlbnN0cmVldG1hcC5vcmcvY29weXJpZ2h0XCI+T3BlblN0cmVldE1hcDwvYT4gY29udHJpYnV0b3JzJyxcbiAgICB9LFxuICApLmFkZFRvKG1hcCk7XG5cbiAgY29uc3QgcG9pbnRzID0gW1xuICAgIHtcbiAgICAgIHRpdGxlOiAn0JDQudCx0L7Qu9C40YIg0L3QsCDQmtGA0LDRgdC90L7Qv9C+0LvRj9C90YHQutC+0LknLFxuICAgICAgZGVzY3JpcHRpb246IGDQlNC30LXRgNC20LjQvdGB0LrQuNC5INGA0LDQudC+0L0sXG4gICAg0YPQuy4g0JrRgNCw0YHQvdC+0L/QvtC70Y/QvdGB0LrQsNGPLCAzMGAsXG4gICAgICB0ZWw6ICc5NjIyOTInLFxuICAgICAgd29ya1RpbWU6ICfQmtGA0YPQs9C70L7RgdGD0YLQvtGH0L3QvicsXG4gICAgICBsYXQ6IDQ4Ljc2NDQ2NyxcbiAgICAgIGxuZzogNDQuNDc4ODYwLFxuICAgIH0sXG4gICAge1xuICAgICAgdGl0bGU6ICfQkNC50LHQvtC70LjRgiDQvdCwINCi0YPQu9Cw0LrQsCcsXG4gICAgICBkZXNjcmlwdGlvbjogYNCh0L7QstC10YLRgdC60LjQuSDRgNCw0LnQvtC9LFxuICAgINGD0LsuINCa0LDRgNC70LAg0JzQsNGA0LrRgdCwLCA3YCxcbiAgICAgIHRlbDogJzk2MjI5MicsXG4gICAgICB3b3JrVGltZTogJ9Ca0YDRg9Cz0LvQvtGB0YPRgtC+0YfQvdC+JyxcbiAgICAgIGxhdDogNDguNjc2NDg2LFxuICAgICAgbG5nOiA0NC40Nzg3MjUsXG4gICAgfSxcbiAgXTtcblxuICBjb25zdCBjcmVhdGVQb3B1cCA9ICh7IHRpdGxlLCBkZXNjcmlwdGlvbiwgd29ya1RpbWUsIHRlbCB9KSA9PiBgXG4gIDxzZWN0aW9uIGNsYXNzPVwibWFwLWJhbG9vblwiPlxuICA8aDMgY2xhc3M9XCJtYXAtYmFsb29uX190aXRsZVwiPiR7dGl0bGV9PC9oMz5cbiAgPHAgY2xhc3M9XCJtYXAtYmFsb29uX19hZHJlc3NcIj4ke2Rlc2NyaXB0aW9ufTwvcD5cbiAgPGEgY2xhc3M9XCJtYXAtYmFsb29uX190ZWxcIiBocmVmPVwidGVsOiske3RlbH1cIj4ke3RlbH08L2E+XG4gIDxwIGNsYXNzPVwibWFwLWJhbG9vbl9fd29yay10aW1lXCI+JHt3b3JrVGltZX08L3A+XG4gIDwvc2VjdGlvbj5cbmA7XG5cbiAgcG9pbnRzLmZvckVhY2goKHBvaW50KSA9PiB7XG4gICAgY29uc3QgeyBsYXQsIGxuZyB9ID0gcG9pbnQ7XG5cbiAgICBjb25zdCBtYXJrZXIgPSBMLm1hcmtlcihcbiAgICAgIHtcbiAgICAgICAgbGF0LFxuICAgICAgICBsbmdcbiAgICAgIH0sXG4gICAgKTtcblxuICAgIG1hcmtlci5hZGRUbyhtYXApLmJpbmRQb3B1cChjcmVhdGVQb3B1cChwb2ludCksXG4gICAgICB7XG4gICAgICAgIGtlZXBJblZpZXc6IHRydWUsXG4gICAgICB9LFxuICAgICk7XG4gIH0pO1xufVxuXG5cbiIsImNvbnN0IG1vZGFscyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbCcpO1xuY29uc3QgY2hhbmdlQ2l0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jaGFuZ2UtY2l0eScpO1xuY29uc3QgcmV2aWV3QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmV4cGVydF9fZ2l2ZS1yZXZpZXctYnV0dG9uJyk7XG5jb25zdCBtb2RhbENpdHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2NpdHknKTtcbmNvbnN0IHJldmlld01vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsX19yZXZpZXcnKTtcbmNvbnN0IHJldmlld1N1Y2Nlc3MgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3Jldmlldy1zdWNjZXNzZnVsJyk7XG5cblxuY29uc3Qgc2hvd01vZGFsID0gKG1vZGFsKSA9PiB7XG4gIGNvbnNvbGUubG9nKG1vZGFsKTtcbiAgY29uc3Qgd3JhcHBlciA9IG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF9fd3JhcHBlcicpO1xuICBjb25zdCBvblBvcHVwRXNjS2V5ZG93biA9IGUgPT4gZXNjS2V5ZG93bihlLCBjbG9zZU1vZGFsKTtcbiAgY29uc3Qgb25DbGlja1BhZ2UgPSBlID0+IHtcbiAgICBwYWdlRXZ0KGUsIG1vZGFsLCB3cmFwcGVyLCBjbG9zZU1vZGFsKVxuICB9O1xuXG4gIGNvbnN0IG9wZW5Nb2RhbCA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKCdtb2RhbC0tYWN0aXZlJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uUG9wdXBFc2NLZXlkb3duKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tQYWdlKTtcbiAgfTtcblxuICBjb25zdCBjbG9zZU1vZGFsID0gKCkgPT4ge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsLS1hY3RpdmUnKTtcbiAgICBnaXZlQnRuQ2xvc2UobW9kYWwpLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2xvc2VNb2RhbCk7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIG9uUG9wdXBFc2NLZXlkb3duKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIG9uQ2xpY2tQYWdlKTtcbiAgfTtcblxuICBvcGVuTW9kYWwoKTtcbiAgZ2l2ZUJ0bkNsb3NlKG1vZGFsKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNsb3NlTW9kYWwpO1xufVxuXG5pZiAoY2hhbmdlQ2l0eSkge1xuICBjaGFuZ2VDaXR5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZSA9PiB7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2hvd01vZGFsKG1vZGFsQ2l0eSk7XG4gIH0pO1xufVxuXG5pZiAocmV2aWV3QnRuKSB7XG4gIHJldmlld0J0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNob3dNb2RhbChyZXZpZXdNb2RhbCk7XG4gIH0pO1xufVxuXG5pZiAocmV2aWV3TW9kYWwpIHtcbiAgY29uc3QgcmV2aWV3VGV4dEFyZWEgPSByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3Jldmlldy10ZXh0YXJlYScpO1xuICBjb25zdCByZXZpZXdTdWJtaXQgPSByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX3Jldmlldy1idXR0b24nKTtcblxuICBjb25zdCBtaW4gPSAzMDtcbiAgY29uc3QgbWF4ID0gMTAwMDtcbiAgY29uc3QgdmFsaWQgPSAodmFsdWUpID0+IHZhbHVlID4gbWluICYmIHZhbHVlIDw9IG1heDtcblxuICByZXZpZXdUZXh0QXJlYS5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgIGNvbnN0IHZhbHVlTGVuZ3RoID0gcmV2aWV3VGV4dEFyZWEudmFsdWUubGVuZ3RoO1xuXG4gICAgaWYgKHZhbGlkKHZhbHVlTGVuZ3RoKSkge1xuICAgICAgcmV2aWV3U3VibWl0LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgICAgcmV2aWV3VGV4dEFyZWEuc2V0Q3VzdG9tVmFsaWRpdHkoJycpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXZpZXdUZXh0QXJlYS5zZXRDdXN0b21WYWxpZGl0eShg0JzQuNC90LjQvNCw0LvRjNC90L7QtSDQutC+0LvRh9C40YHRgtCy0L4g0YHQuNC80L7QstC+0LvQvtCyOiAke21pbn0uINCc0LDQutGB0LjQvNCw0LvRjNC90L7QtSDQutC+0LvRh9C40YHRgtCy0L4g0YHQuNC80L7QstC+0LvQvtCyICR7bWF4fS4g0JLRiyDQstCy0LXQu9C4ICR7dmFsdWVMZW5ndGh9YCk7XG4gICAgICByZXZpZXdTdWJtaXQuc2V0QXR0cmlidXRlKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICB9XG4gICAgcmV2aWV3VGV4dEFyZWEucmVwb3J0VmFsaWRpdHkoKTtcbiAgfSk7XG5cbiAgcmV2aWV3U3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICByZXZpZXdUZXh0QXJlYS52YWx1ZSA9ICcnO1xuICAgIHNob3dNb2RhbChyZXZpZXdTdWNjZXNzKTtcbiAgfSk7XG59XG4iLCJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNsaWRlcl9fc2xpZGUnKSkge1xuICBjb25zdCBzbGlkZXJCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnNsaWRlcl9fYnV0dG9uJyk7XG4gIGNvbnN0IHNsaWRlclNsaWRlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbGlkZXJfX3NsaWRlJyk7XG5cbiAgY29uc3QgYnV0dG9uQ2xpY2sgPSAoZWwpID0+IHtcbiAgICBjb25zdCBhY3RpdmVCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpZGVyX19idXR0b24tLWFjdGl2ZScpO1xuICAgIGFjdGl2ZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX2J1dHRvbi0tYWN0aXZlJyk7XG4gICAgZWwuY2xhc3NMaXN0LmFkZCgnc2xpZGVyX19idXR0b24tLWFjdGl2ZScpO1xuICB9XG5cbiAgY29uc3Qgc2xpZGVzID0gKGNvbGxlY3Rpb24sIGkpID0+IHtcbiAgICBjb2xsZWN0aW9uLmZvckVhY2goKGVsLCBqKSA9PiB7XG4gICAgICBpZiAoZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzbGlkZXJfX3NsaWRlLS1hY3RpdmUnKSkge1xuICAgICAgICBlbC5jbGFzc0xpc3QucmVtb3ZlKCdzbGlkZXJfX3NsaWRlLS1hY3RpdmUnKTtcbiAgICAgIH1cbiAgICAgIGlmIChqID09PSBpKSB7XG4gICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ3NsaWRlcl9fc2xpZGUtLWFjdGl2ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIGNvbnN0IHNsaWRlID0gKCkgPT4ge1xuICAgIHNsaWRlckJ1dHRvbnMuZm9yRWFjaCgoZWwsIGkpID0+IHtcbiAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgICBidXR0b25DbGljayhlbCk7XG4gICAgICAgIHNsaWRlcyhzbGlkZXJTbGlkZXMsIGkpO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICBzbGlkZSgpO1xufVxuIiwiY29uc3QgZXNjRXZlbnQgPSBlID0+IHtcbiAgcmV0dXJuIGUua2V5ID09PSAnRXNjYXBlJyB8fCBlLmtleSA9PT0gJ0VzYyc7XG59O1xuXG5jb25zdCBlc2NLZXlkb3duID0gKGUsIGZuKSA9PiB7XG4gIGlmIChlc2NFdmVudChlKSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBmbigpO1xuICB9XG59O1xuXG5jb25zdCBwYWdlRXZ0ID0gKGUsIG1vZGFsLCB3cmFwcGVyLCBmbikgPT4ge1xuICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGxldCBpdHNCbG9jayA9IHRhcmdldCA9PSB3cmFwcGVyIHx8IHdyYXBwZXIuY29udGFpbnModGFyZ2V0KTtcbiAgbGV0IG1vZGFsSXNBY3RpdmUgPSBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsLS1hY3RpdmUnKTtcblxuICBpZiAoIWl0c0Jsb2NrICYmIG1vZGFsSXNBY3RpdmUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZm4oKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25Qb3B1cEVzY0tleWRvd24pO1xuICB9XG59O1xuXG5jb25zdCBnaXZlQnRuQ2xvc2UgPSBlbCA9PiBlbC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfX2Nsb3NlJyk7XG5cblxuXG5cblxuIiwiY29uc3QgYnV0dG9uTWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZW51X19idXR0b24nKTtcbmNvbnN0IG1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fbGlzdCcpO1xuY29uc3QgbWVudVdyYXBwZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubWVudV9fd3JhcHBlcicpO1xuY29uc3QgYm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wYWdlLWJvZHknKTtcblxuY29uc3QgcGFnZUV2dE1lbnUgPSAoZSkgPT4ge1xuICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQ7XG4gIGxldCBpdHNNZW51ID0gdGFyZ2V0ID09IG1lbnUgfHwgbWVudS5jb250YWlucyh0YXJnZXQpO1xuICBsZXQgaXRzQnV0dG9uID0gdGFyZ2V0ID09IGJ1dHRvbk1lbnU7XG4gIGxldCBtZW51SXNBY3RpdmUgPSBtZW51LmNsYXNzTGlzdC5jb250YWlucygnbWVudV9fbGlzdC0tYWN0aXZlJyk7XG5cbiAgaWYgKCFpdHNNZW51ICYmICFpdHNCdXR0b24gJiYgbWVudUlzQWN0aXZlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNsb3NlTWVudSgpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBvblBvcHVwRXNjS2V5ZG93bik7XG4gIH1cbn07XG5cbmNvbnN0IGlzQnV0dG9uQWN0aXZlID0gKCkgPT4gYnV0dG9uTWVudS5jbGFzc0xpc3QuY29udGFpbnMoJ21lbnVfX2J1dHRvbi0tYWN0aXZlJyk7XG5cbmNvbnN0IHRvZ2dsZU1lbnUgPSAoKSA9PiB7XG4gIGJ1dHRvbk1lbnUuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudV9fYnV0dG9uLS1hY3RpdmUnKTtcbiAgbWVudS5jbGFzc0xpc3QudG9nZ2xlKCdtZW51X19saXN0LS1hY3RpdmUnKTtcbiAgbWVudVdyYXBwZXIuY2xhc3NMaXN0LnRvZ2dsZSgnbWVudV9fd3JhcHBlci0tYWN0aXZlJyk7XG4gIGJvZHkuY2xhc3NMaXN0LnRvZ2dsZSgnYmx1cicpO1xufVxuXG5jb25zdCBvblBvcHVwRXNjS2V5ZG93biA9IGUgPT4gZXNjS2V5ZG93bihlLCBjbG9zZU1lbnUpO1xuXG5jb25zdCBvcGVuTWVudSA9ICgpID0+IHtcbiAgdG9nZ2xlTWVudSgpO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25Qb3B1cEVzY0tleWRvd24pO1xuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHBhZ2VFdnRNZW51KTtcbn07XG5cbmNvbnN0IGNsb3NlTWVudSA9ICgpID0+IHtcbiAgdG9nZ2xlTWVudSgpO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgb25Qb3B1cEVzY0tleWRvd24pO1xuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHBhZ2VFdnRNZW51KTtcbn1cblxuYnV0dG9uTWVudS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGUgPT4ge1xuICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgaWYgKCFpc0J1dHRvbkFjdGl2ZSgpKSB7XG4gICAgb3Blbk1lbnUoKTtcbiAgfSBlbHNlIHtcbiAgICBjbG9zZU1lbnUoKTtcbiAgfVxufSk7XG5cblxuXG5cblxuXG4iLCJpZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFib3V0LWNvbXBhbnktc2xpZGVyJykpIHtcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICQoJy5hYm91dC1jb21wYW55LXNsaWRlcicpLnNsaWNrKHtcbiAgICAgIHNsaWRlc1RvU2hvdzogNixcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiA2LFxuICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDE2MDAsXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiA0XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnJlYWtwb2ludDogNzY4LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogM1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDQ3OSxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgc2xpZGVzVG9TaG93OiAxLFxuICAgICAgICAgICAgc2xpZGVzVG9TY3JvbGw6IDFcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgfSk7XG59XG5cbmlmIChkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2xpY2tfX2FwcG9pbnRtZW50cycpKSB7XG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAkKCcuc2xpY2tfX2FwcG9pbnRtZW50cycpLnNsaWNrKHtcbiAgICAgIHNsaWRlc1RvU2hvdzogMyxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiAzLFxuICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDE5MTksXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnJlYWtwb2ludDogNDc5LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmFsbC1zZXJ2aWNlc19fc2xpZGVyJykpIHtcbiAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICQoJy5hbGwtc2VydmljZXNfX3NsaWRlcicpLnNsaWNrKHtcbiAgICAgIHNsaWRlc1RvU2hvdzogNCxcbiAgICAgIHNsaWRlc1RvU2Nyb2xsOiA0LFxuICAgICAgdmFyaWFibGVXaWR0aDogdHJ1ZSxcbiAgICAgIHJlc3BvbnNpdmU6IFtcbiAgICAgICAge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDE5MTksXG4gICAgICAgICAgc2V0dGluZ3M6IHtcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMixcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnJlYWtwb2ludDogNzY3LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgYnJlYWtwb2ludDogNDc5LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBhcnJvd3M6IGZhbHNlLFxuICAgICAgICAgICAgZG90czogdHJ1ZSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcbiAgICAgICAgICAgIHNsaWRlc1RvU2Nyb2xsOiAxXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG4gIH0pO1xufVxuXG5pZiAoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmV4cGVydC1wcm9maWxlX19zbGlkZXInKSkge1xuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgJCgnLmV4cGVydC1wcm9maWxlX19zbGlkZXInKS5zbGljayh7XG4gICAgICBzbGlkZXNUb1Nob3c6IDMsXG4gICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXG4gICAgICByZXNwb25zaXZlOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBicmVha3BvaW50OiAxOTE5LFxuICAgICAgICAgIHNldHRpbmdzOiB7XG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDIsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGJyZWFrcG9pbnQ6IDc2NyxcbiAgICAgICAgICBzZXR0aW5nczoge1xuICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgICAgIGRvdHM6IHRydWUsXG4gICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXG4gICAgICAgICAgICBzbGlkZXNUb1Njcm9sbDogMSxcbiAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IGZhbHNlLFxuICAgICAgICAgICAgYWRhcHRpdmVIZWlnaHQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9KTtcbiAgfSk7XG59O1xuIl19
